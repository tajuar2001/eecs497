{"ast":null,"code":"import React,{useEffect,useState}from'react';import axios from'axios';import'./css/advicePosts.css';// Assuming you have a separate CSS file for AdvicePage styles\nimport CreateAdvicePost from'./CreateAdvicePost';import'./css/advicePosts.css';import PostReply from'./PostReply';// Make sure this path matches your file structure\nimport{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";function AdvicePosts(_ref){let{user}=_ref;const[posts,setPosts]=useState([]);const fetchPosts=()=>{axios.get('/api/advice').then(response=>setPosts(response.data)).catch(error=>console.error('There was an error fetching the advice posts:',error));};useEffect(()=>{fetchPosts();},[]);const handleDeletePost=postId=>{axios.delete(\"/api/advice/\".concat(postId)).then(()=>{alert(\"Deleted post!\");fetchPosts();// Refresh the posts after deleting\n}).catch(error=>console.error('There was an error deleting the advice post:',error));};// Add a similar function to handle the deletion of replies\nconst handleDeleteReply=(postId,replyId)=>{axios.delete(\"/api/advice/\".concat(postId,\"/reply/\").concat(replyId)).then(()=>{alert(\"Deleted reply!\");fetchPosts();// Refresh the posts after deleting\n}).catch(error=>console.error('There was an error deleting the reply:',error));};return/*#__PURE__*/_jsxs(\"div\",{className:\"advice-posts\",children:[posts.map(post=>/*#__PURE__*/_jsxs(\"div\",{className:\"advice-post\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsxs(\"strong\",{children:[\"Question by \",post.author,\": \"]}),post.question]}),user.name===post.author&&/*#__PURE__*/_jsx(\"button\",{className:\"delete-btn\",onClick:()=>handleDeletePost(post.id),children:\"Delete\"}),post.replies&&post.replies.map(reply=>/*#__PURE__*/_jsxs(\"div\",{className:\"reply\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsxs(\"strong\",{children:[\"Reply by \",reply.author,\": \"]}),reply.text]}),user.name===reply.author&&/*#__PURE__*/_jsx(\"button\",{className:\"delete-btn\",onClick:()=>handleDeleteReply(post.id,reply.id),children:\"Delete\"})]},reply.id)),/*#__PURE__*/_jsx(PostReply,{postId:post.id,refreshPage:fetchPosts})]},post.id)),/*#__PURE__*/_jsx(CreateAdvicePost,{refreshPage:fetchPosts})]});}export default AdvicePosts;","map":{"version":3,"names":["React","useEffect","useState","axios","CreateAdvicePost","PostReply","jsxs","_jsxs","jsx","_jsx","AdvicePosts","_ref","user","posts","setPosts","fetchPosts","get","then","response","data","catch","error","console","handleDeletePost","postId","delete","concat","alert","handleDeleteReply","replyId","className","children","map","post","author","question","name","onClick","id","replies","reply","text","refreshPage"],"sources":["/home/tajuarb/Coding/newLeaf/frontend/src/components/AdvicePosts.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport axios from 'axios';\nimport './css/advicePosts.css'; // Assuming you have a separate CSS file for AdvicePage styles\nimport CreateAdvicePost from './CreateAdvicePost';\nimport './css/advicePosts.css';\nimport PostReply from './PostReply'; // Make sure this path matches your file structure\n\n\n\nfunction AdvicePosts({user}) {\n    const [posts, setPosts] = useState([]);\n    const fetchPosts = () => {\n        axios.get('/api/advice')\n            .then(response => setPosts(response.data))\n            .catch(error => console.error('There was an error fetching the advice posts:', error));\n      };\n    \n      useEffect(() => {\n        fetchPosts();\n      }, []);\n\n      const handleDeletePost = (postId) => {\n        axios.delete(`/api/advice/${postId}`)\n            .then(() => {\n              alert(\"Deleted post!\");\n                fetchPosts(); // Refresh the posts after deleting\n            })\n            .catch(error => console.error('There was an error deleting the advice post:', error));\n    };\n\n    // Add a similar function to handle the deletion of replies\n    const handleDeleteReply = (postId, replyId) => {\n        axios.delete(`/api/advice/${postId}/reply/${replyId}`)\n            .then(() => {\n                alert(\"Deleted reply!\");\n                fetchPosts(); // Refresh the posts after deleting\n            })\n            .catch(error => console.error('There was an error deleting the reply:', error));\n    };\n\n    return (\n      <div className=\"advice-posts\">\n          {posts.map((post) => (\n              <div key={post.id} className=\"advice-post\">\n                  <p><strong>Question by {post.author}: </strong>{post.question}</p>\n                  {user.name === post.author && (\n                      <button\n                          className=\"delete-btn\"\n                          onClick={() => handleDeletePost(post.id)}\n                      >\n                          Delete\n                      </button>\n                  )}\n                  {post.replies && post.replies.map(reply => (\n                      <div key={reply.id} className=\"reply\">\n                          <p><strong>Reply by {reply.author}: </strong>{reply.text}</p>\n                          {user.name === reply.author && (\n                              <button\n                                  className=\"delete-btn\"\n                                  onClick={() => handleDeleteReply(post.id, reply.id)}\n                              >\n                                  Delete\n                              </button>\n                          )}\n                      </div>\n                  ))}\n                  <PostReply postId={post.id} refreshPage={fetchPosts} />\n              </div>\n          ))}\n          <CreateAdvicePost refreshPage={fetchPosts}></CreateAdvicePost>\n      </div>\n  );\n}\n\nexport default AdvicePosts;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}